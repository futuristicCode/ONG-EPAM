{% extends 'base.html' %}

{% block content %}

<!--
 header
-->

<!-- Page header with logo and tagline-->
<header class="py-5 bg-light border-bottom mb-4">
    <div class="container">
        <div class="text-center my-2">
            <div class="bg-white rounded-lg shadow p-5"><strong class="text-uppercase text-secondary d-inline-block mb-2 text-sm"><h2>EPAM</h2></strong>
                <h4 class="mb-3">Ensemble Pour un Avenir Meilleur</h4>
            <!--h1 class="fw-bolder">Welcome to Blog Home!</h1-->
            <p class="lead mb-0">Les details du projet</p>
        </div>
    </div>
</header>


<!--
 header
-->

<!-- content-->

<!-- Page content-->
<div class="container mt-5">
    <div class="row">
        <div class="col-lg-12">
        <!-- Post content-->
            <article>
               <!-- Post header-->
                <header class="mb-4">
                <!-- Post title-->
                <h1 class="fw-bolder mb-1">{{post.title}}</h1>
                <!-- Post meta content-->
                <div class="text-muted fst-italic mb-2">
                    <div class="small">Date de publication : {{post.publish}}</div>
                    <div class="small">Auteur : {{post.author.username}}</div>
                </div>
                <!-- Post categories-->
                </header>
                <!-- Preview image figure-->
               <figure class="mb-4"><img class="img-fluid img-thumbnail rounded" src="/uploads/{{post.image}}" alt="..." /></figure>
                                <!-- Post content-->
                                <section class="mb-5 text-content">
                                    <p class="lead fs-5 mb-4">{{post.body|safe}}</p>
                                    </section>
                            </article>
                            <!-- Comments section-->
                            <section class="mb-5">
                                <div class="card bg-light">
                                    <h2>
                                        {% with comments.count as total_comments %}
                                           {{total_comments}} commentaire{{total_comments|pluralize}}
                                        {% endwith %}
                                    </h2>
                                    <div class="card-body">
                                        <!-- Comment form-->
                                        {% if new_comment %}
                                           <h3>Votre commentaire a ete ajouter</h3>
                                        {% else %}
                                        <h3>Ajouter un commentaire</h3>
                                           <form action="" method="post" class="mb-5">
                                               {{comment_form.as_p}}
                                               {% csrf_token %}
                                               <button class="btn btn-primary" type="submit">Ajouter</button>
                                           </form>  
                                        {% endif %}
                        

                                        {% for comment in comments %}
                                            <!-- Single comment-->
                                        <div class="d-flex mb-3">
                                            <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                                            <div class="ms-3">
                                                <div class="fw-bold">
                                                    #{{forloop.counter}} {{comment.username}} 
                                                    <span class="text-muted">
                                                        {{comment.created}}
                                                    </span>
                                                </div>
                                                {{comment.body}}
                                            </div>
                                        </div>
                                        {% empty %}
                                        <h2>Ce post n'a pas de commentaire.</h2>
                                        {% endfor %}
                                    </div>
                                </div>
                            </section>
                        </div>
                     
                    </div>
                </div>










            <!--section>
                <div class="container">
                   
                    <div class="row text-center">
                        <div class="col-xl-10 mx-auto"><img class="img-fluid mb-5"
                                src="{{post.image}}"
                                alt=""></div>
                    </div>
                    <div class="row">
                        <div class="col-xl-8 col-lg-10 mx-auto">    
                            <h1>{{post.title}}</h1>
                            <br><br>
                            <div class="text-content">
                                {{post.body|safe}}
                            </div>

                            <p><em>Date de publication : {{post.publish}}<em></p>
                            <p><em>Auteur : {{post.author.username}}<em></p>
                        </div>
                    </div>
                </div>
            </section-->
{% endblock content %}